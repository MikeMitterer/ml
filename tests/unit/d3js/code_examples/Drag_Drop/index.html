<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.js"></script>
        <title>Drag and Drop</title>

        <style>

            html, body {
                height: 100%;
                margin: 0;
            }

            .svg_canvas {
                display: block;
                margin: 0 auto;
                background-color: gray;
            }

            .dragged_element {
                fill: #f4b942;
            }
        </style>
    </head>
    <body>
        <svg height="400" width="600" class="svg_canvas">
        </svg>

        <script>

            var dragX, dragX;

            var drag = d3.drag()
                .on("start", function(){
                    dragX = d3.event.x - d3.select(this).attr("x");
                    dragY = d3.event.y - d3.select(this).attr("y");

                    d3.select(this)
                        .attr("class","dragged_element");
                })
                .on("drag", function(){
                    d3.select(this)
                        .attr("x", d3.event.x - dragX)
                        .attr("y", d3.event.y - dragY);
                })
                .on("end", function(){
                    d3.select(this)
                        .attr("class",null);
                })

            d3.select("svg")
                .append("rect")
                .attr("x","100")
                .attr("y","100")
                .attr("width","200")
                .attr("height", "200")
                .call(drag);

        </script>    
    </body>
</html>    
